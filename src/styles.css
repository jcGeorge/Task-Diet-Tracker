html[data-bs-theme="light"] {
  --bs-primary: #6f7d89;
  --bs-primary-rgb: 111, 125, 137;
  --bs-link-color: #4b5b66;
  --bs-link-hover-color: #33414b;
  --app-bg-1: #f3f1d5;
  --app-bg-2: #ece9c3;
  --app-bg-3: #e4dfb6;
  --app-text: #2f3b43;
  --app-header-bg: #dfe5ea;
  --app-card-bg: #f4f6f8;
  --app-input-bg: #e3e9ee;
  --app-list-bg: #edf1f4;
  --app-border: #b7c1c9;
  --graph-tooltip-bg: rgba(247, 250, 253, 0.97);
  --graph-tooltip-border: rgba(44, 55, 64, 0.28);
  --graph-tooltip-text: #1f2a32;
  --graph-tooltip-accent-1: #7b5b00;
  --graph-tooltip-accent-2: #0b566f;
  --graph-slice-stroke-active: rgba(31, 42, 50, 0.7);
  --graph-slice-stroke: rgba(31, 42, 50, 0.26);
}

html[data-bs-theme="dark"] {
  --bs-primary: #8ca3b4;
  --bs-primary-rgb: 140, 163, 180;
  --bs-link-color: #b2cadc;
  --bs-link-hover-color: #d0e4f2;
  --app-bg-1: #161a1f;
  --app-bg-2: #1f252d;
  --app-bg-3: #2b343d;
  --app-text: #e6ebf0;
  --app-header-bg: #2a323a;
  --app-card-bg: #252d35;
  --app-input-bg: #313b45;
  --app-list-bg: #2d3640;
  --app-border: #46515d;
  --graph-tooltip-bg: rgba(23, 28, 34, 0.92);
  --graph-tooltip-border: rgba(255, 255, 255, 0.2);
  --graph-tooltip-text: #ffffff;
  --graph-tooltip-accent-1: #fff2bf;
  --graph-tooltip-accent-2: #d8f5ff;
  --graph-slice-stroke-active: rgba(255, 255, 255, 0.88);
  --graph-slice-stroke: rgba(0, 0, 0, 0.22);
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: "Trebuchet MS", "Franklin Gothic Medium", "Segoe UI", sans-serif;
  color: var(--app-text);
  background:
    radial-gradient(circle at 15% 0%, var(--app-bg-2), transparent 42%),
    linear-gradient(140deg, var(--app-bg-1), var(--app-bg-3));
}

#root {
  min-height: 100vh;
}

.app-shell {
  min-height: 100vh;
}

.app-header {
  background-color: color-mix(in srgb, var(--app-header-bg) 92%, transparent);
  backdrop-filter: blur(6px);
  border-bottom: 1px solid var(--app-border);
}

.app-toolbar {
  gap: 0.75rem;
}

.header-left-btn {
  margin-left: 7px;
}

.toolbar-controls {
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: 0.6rem;
}

.tracker-select {
  width: 154px;
  min-width: 154px;
}

.form-select.tracker-select-active,
.form-select.tracker-select-active:focus {
  border-color: color-mix(in srgb, var(--bs-primary) 72%, #ffffff);
  box-shadow: 0 0 0 0.14rem rgba(var(--bs-primary-rgb), 0.2);
}

html[data-bs-theme="light"] .form-select.tracker-select-active,
html[data-bs-theme="light"] .form-select.tracker-select-active:focus {
  background-color: #edf2f6;
  border-color: #778797;
  box-shadow: 0 0 0 0.18rem rgba(86, 104, 118, 0.3);
}

html[data-bs-theme="dark"] .form-select.tracker-select-active,
html[data-bs-theme="dark"] .form-select.tracker-select-active:focus {
  background-color: #2f3943;
  border-color: #9fb6c8;
  box-shadow: 0 0 0 0.2rem rgba(140, 163, 180, 0.34);
}

.settings-btn {
  min-width: 2.6rem;
}

.toolbar-btn-active {
  color: var(--bs-btn-hover-color, #ffffff);
  background-color: var(--bs-btn-hover-bg, #6c757d);
  border-color: var(--bs-btn-hover-border-color, #6c757d);
}

.delete-data-controls {
  min-height: 38px;
}

.delete-date-input {
  width: 16rem;
  min-width: 0;
}

.shared-date-input {
  width: 40%;
  min-width: 180px;
}

.shared-time-input {
  width: max-content;
  max-width: 100%;
  min-width: 0;
}

.shared-time-input .form-select {
  min-width: 0;
}

.time-select-box {
  flex: 0 0 8.8rem;
  width: 8.8rem;
  min-width: 8.8rem;
}

.time-select-separator {
  font-size: 1rem;
}

.shared-date-input-row .shared-date-input {
  flex: 0 1 40%;
}

.shared-date-nav-btn {
  min-width: 2.25rem;
  padding-left: 0.45rem;
  padding-right: 0.45rem;
}

.minutes-selector-input {
  --minutes-control-height: calc(1.5rem + 0.75rem + 2px);
  flex: 0 0 8.8rem;
  width: 8.8rem;
  min-width: 8.8rem;
  height: var(--minutes-control-height);
  min-height: var(--minutes-control-height);
  font-size: 1.02rem;
}

.workout-minute-row {
  display: grid;
  grid-template-columns: 130px auto;
  align-items: center;
  column-gap: 0.75rem;
}

.workout-toggle-btn {
  width: 130px;
  justify-content: flex-start;
  text-align: left;
}

.entertainment-minute-row {
  grid-template-columns: var(--entertainment-label-width, 130px) auto;
}

.entertainment-toggle-btn {
  width: var(--entertainment-label-width, 130px);
  white-space: nowrap;
}

.entertainment-minute-row .minutes-selector-input {
  flex: 0 0 var(--entertainment-label-width, 130px);
  width: var(--entertainment-label-width, 130px);
  min-width: var(--entertainment-label-width, 130px);
}

.workout-minute-controls {
  min-width: 0;
}

.minutes-control-row {
  --minutes-control-height: calc(1.5rem + 0.75rem + 2px);
  min-height: var(--minutes-control-height);
}

.minutes-step-btn {
  min-width: 2.6rem;
  min-height: var(--minutes-control-height);
  height: var(--minutes-control-height);
  align-self: center;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 1.25rem;
  font-weight: 700;
  line-height: 1;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 0.55rem;
  padding-right: 0.55rem;
  border-radius: var(--bs-border-radius);
}

.minutes-unit-label {
  font-size: 0.98rem;
  font-weight: 600;
  line-height: 1;
  white-space: nowrap;
}

.app-body {
  padding: 1rem;
  max-width: 1200px;
}

.card,
.loading-card,
.hero-card,
.tracker-card {
  background-color: color-mix(in srgb, var(--app-card-bg) 94%, transparent);
  border: 1px solid var(--app-border) !important;
}

.form-control,
.form-select {
  background-color: var(--app-input-bg);
  border-color: var(--app-border);
  color: var(--app-text);
}

.form-control:focus,
.form-select:focus {
  background-color: var(--app-input-bg);
  border-color: color-mix(in srgb, var(--bs-primary) 72%, #ffffff);
  color: var(--app-text);
  box-shadow: 0 0 0 0.2rem rgba(var(--bs-primary-rgb), 0.16);
}

.form-control::placeholder {
  color: color-mix(in srgb, var(--app-text) 55%, transparent);
}

.list-group-item {
  background-color: var(--app-list-bg);
  color: var(--app-text);
  border-color: var(--app-border);
}

.text-secondary,
.form-text {
  color: color-mix(in srgb, var(--app-text) 68%, transparent) !important;
}

.flag-toggle {
  border: 2px dotted #8b939a;
  color: #6f757b;
  background-color: transparent;
}

.flag-toggle:hover,
.flag-toggle:focus {
  border-color: #7f878d;
  color: #5d646a;
  background-color: color-mix(in srgb, var(--app-input-bg) 72%, transparent);
}

.meta-row {
  display: grid;
  grid-template-columns: minmax(120px, 1fr) auto auto auto;
  gap: 0.5rem;
  align-items: center;
}

.meta-usage-btn {
  min-width: 5.4rem;
  text-align: left;
}

.tracker-add-entry-btn {
  --tracker-action-height: calc(1.5rem + 0.75rem + 2px);
  min-height: var(--tracker-action-height);
  height: var(--tracker-action-height);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  line-height: 1.5;
  padding-top: 0.375rem;
  padding-bottom: 0.375rem;
  padding-left: 0.75rem;
  padding-right: calc(var(--bs-btn-padding-x) + 5px);
}

.input-action-row {
  width: 100%;
}

.input-action-btn {
  flex: 0 0 26.6%;
  max-width: 224px;
}

.hub-card-body {
  padding-left: 0.6875rem;
  padding-right: 0.6875rem;
}

.calories-sub-item {
  padding-left: 5px !important;
}

.entry-form-divider {
  border: 0;
  border-top: 1px solid color-mix(in srgb, var(--app-border) 76%, transparent);
  margin: 1rem 0 0.8rem;
  opacity: 1;
}

html[data-bs-theme="light"] .entry-form-divider {
  border-top-color: color-mix(in srgb, #9aa8b5 58%, transparent);
}

html[data-bs-theme="dark"] .entry-form-divider {
  border-top-color: color-mix(in srgb, #6a7886 72%, transparent);
}

.app-toast {
  --app-toast-base-height: 58px;
  width: max-content;
  max-width: min(400px, calc(100vw - 2rem));
  min-width: 0;
  min-height: var(--app-toast-base-height);
  max-height: calc(var(--app-toast-base-height) + 50px);
}

.app-toast .d-flex {
  align-items: center;
  min-height: var(--app-toast-base-height);
}

.app-toast .toast-body {
  display: flex;
  align-items: center;
  min-height: var(--app-toast-base-height);
  padding-top: 0;
  padding-bottom: 0;
  max-height: calc(var(--app-toast-base-height) + 34px);
  overflow-y: auto;
  white-space: normal;
}

.weight-graph-wrap {
  width: 100%;
}

.substances-histogram-wrap {
  width: 100%;
}

.workouts-composition-wrap {
  width: 100%;
}

.threshold-chart-wrap {
  width: 100%;
}

.homework-chart-student-select {
  width: 220px;
  min-width: 220px;
}

.homework-tracker-student-select {
  width: 180px;
  min-width: 180px;
}

.workouts-composition-svg {
  display: block;
  width: 100%;
  height: auto;
  border: 1px solid var(--app-border);
  border-radius: 0.6rem;
  background-color: color-mix(in srgb, var(--app-card-bg) 90%, transparent);
}

.threshold-chart-svg {
  display: block;
  width: 100%;
  height: auto;
  border: 1px solid var(--app-border);
  border-radius: 0.6rem;
  background-color: color-mix(in srgb, var(--app-card-bg) 90%, transparent);
}

.substances-histogram-svg {
  display: block;
  width: 100%;
  height: auto;
  border: 1px solid var(--app-border);
  border-radius: 0.6rem;
  background-color: color-mix(in srgb, var(--app-card-bg) 90%, transparent);
}

.weight-graph-svg {
  display: block;
  width: 100%;
  height: auto;
  border: 1px solid var(--app-border);
  border-radius: 0.6rem;
  background-color: color-mix(in srgb, var(--app-card-bg) 90%, transparent);
}

.graph-legend {
  display: flex;
  gap: 1rem;
  align-items: center;
}

.workouts-chart-legend {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem 0.55rem;
}

.workout-legend-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  justify-content: flex-start;
  min-width: 150px;
}

.workout-legend-btn-active {
  filter: brightness(1.07);
  box-shadow: 0 0 0 0.14rem rgba(var(--bs-primary-rgb), 0.18);
}

.workout-legend-swatch {
  width: 14px;
  height: 14px;
  border-radius: 3px;
  flex: 0 0 auto;
}

.legend-item {
  display: inline-flex;
  gap: 0.45rem;
  align-items: center;
  font-size: 0.9rem;
}

.legend-swatch {
  width: 18px;
  height: 4px;
  border-radius: 999px;
}

.legend-expected {
  background-color: #dc3545;
}

.legend-actual {
  background-color: #198754;
}

.legend-mean {
  width: 18px;
  height: 0;
  border-top: 3px dotted #2fbf71;
  border-radius: 0;
  background: transparent;
}

.graph-metrics {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
  gap: 0.65rem;
}

.graph-date-filter {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  gap: 0.75rem;
  flex-wrap: wrap;
}

.graph-date-filter-input {
  width: 10.5rem;
}

.graph-metric {
  border: 1px solid var(--app-border);
  border-radius: 0.55rem;
  padding: 0.55rem 0.7rem;
  background-color: color-mix(in srgb, var(--app-card-bg) 88%, transparent);
}

.graph-metric-label {
  display: block;
  font-size: 0.84rem;
  opacity: 0.78;
}

.graph-metric-value {
  display: block;
  font-size: 0.96rem;
  font-weight: 600;
}

html[data-bs-theme="light"] .form-control[type="date"] {
  background-color: var(--app-input-bg);
  color: var(--app-text);
  color-scheme: light;
}

html[data-bs-theme="light"] .form-control[type="date"]::-webkit-calendar-picker-indicator {
  opacity: 0.85;
}

.graph-placeholder {
  width: 100%;
  min-height: 220px;
  border-radius: 0.75rem;
  margin: 0.5rem 0 1rem 0;
  border: 2px dashed rgba(var(--bs-primary-rgb), 0.45);
  background:
    linear-gradient(
      135deg,
      rgba(var(--bs-primary-rgb), 0.1) 25%,
      transparent 25%,
      transparent 50%,
      rgba(var(--bs-primary-rgb), 0.1) 50%,
      rgba(var(--bs-primary-rgb), 0.1) 75%,
      transparent 75%
    ),
    color-mix(in srgb, var(--app-card-bg) 88%, transparent);
  background-size: 22px 22px;
}

@media (max-width: 767px) {
  .app-body {
    padding: 0.75rem;
  }

  .app-toolbar {
    align-items: stretch;
  }

  .toolbar-controls {
    width: 100%;
    margin-left: 0;
  }

  .tracker-select {
    width: auto;
    min-width: 0;
    flex: 1;
  }

  .homework-chart-student-select,
  .homework-tracker-student-select {
    width: 100%;
    min-width: 0;
  }

  .meta-row {
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 0.45rem;
  }

  .meta-row > :first-child {
    grid-column: 1 / -1;
  }

  .meta-row > :not(:first-child) {
    width: 100%;
    min-width: 0;
  }

  .delete-date-input {
    width: 100%;
  }

  .shared-date-input {
    width: 100%;
  }

  .shared-time-input {
    width: max-content;
    max-width: 100%;
  }

  .time-select-box {
    flex: 0 0 8.2rem;
    width: 8.2rem;
    min-width: 8.2rem;
  }

  .shared-date-input-row .shared-date-input {
    flex: 1 1 auto;
    width: auto;
    min-width: 0;
  }

  .graph-date-filter {
    align-items: stretch;
  }

  .graph-date-filter-input {
    width: 100%;
    max-width: none;
  }

  .minutes-selector-input {
    flex: 0 0 8rem;
    width: 8rem;
    min-width: 8rem;
  }

  .entertainment-minute-row .minutes-selector-input {
    flex: 0 0 8rem;
    width: 8rem;
    min-width: 8rem;
  }

  .workout-minute-row {
    grid-template-columns: 1fr;
    row-gap: 0.45rem;
  }

  .entertainment-minute-row {
    grid-template-columns: 1fr;
  }

  .workout-toggle-btn {
    width: 100%;
  }

  .entertainment-toggle-btn {
    width: 100%;
  }

  .input-action-btn {
    flex: 1 1 auto;
    max-width: none;
  }
}
